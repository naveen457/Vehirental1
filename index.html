<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Split Page</title>
    <style>
        .container {
            display: flex;
        }
        .left, .right {
            flex: 1;
            padding: 20px;
        }
        .left {
            background-color: lightblue;
            display: flex;
            flex-direction: column;
            align-items: flex-start;
            padding: 20px;
            overflow-x: auto; /* Enables horizontal scrolling */
            width: 100%;    
        }
        .right {
            background-color: lightcoral,
            display: flex;
            flex-direction: column;
            align-items: flex-start;
            padding: 20px;
            overflow-x: auto; /* Enables horizontal scrolling */
            width: 100%;
        }
        
        .table-container {
            width: 100%;
            overflow-x: auto; /* Makes sure the table can be scrolled horizontally */
            margin-bottom: 20px;
        }
        
        .table {
            display: flex;
            flex-wrap: wrap;
            flex-direction: column;
            min-width: 1600px; /* Set a minimum width so tables don't shrink */
            border: 1px solid #ddd;
            border-radius: 5px;
        }   
        
        .header {
            background-color: #f4f4f4;
            font-weight: bold;
            border-bottom: 2px solid #ddd;
        }

        .row {
            display: flex;
            justify-content: flex-start; /* Align items properly */
            flex-wrap: nowrap; /* Ensures all columns stay in a row */
        }
        
        .cell {
            width: 175px;
            padding: 10px;
            border: 1px solid #ddd;
            text-align: center;
            white-space: nowrap; /* Prevents text from wrapping */
        }
        
        /* Scrollbar Styling */
        .table-container::-webkit-scrollbar {
            height: 8px;
        }
        
        .table-container::-webkit-scrollbar-thumb {
            background-color: #888;
            border-radius: 5px;
        }
        
        .table-container::-webkit-scrollbar-track {
            background: #f1f1f1;
        }
    </style>
    <script>
        function toggleForm() {
            var queryType = document.getElementById("query_type").value;
        
            document.getElementById("addUser").style.display = "none";
            document.getElementById("addVehicle").style.display = "none";

            // Disable inputs in hidden forms to prevent unwanted submission
            document.querySelectorAll("#addUser input, #addUser select").forEach(el => el.disabled = true);
            document.querySelectorAll("#addVehicle input, #addVehicle select").forEach(el => el.disabled = true);

            if (queryType === "addUser") {
                document.getElementById("addUser").style.display = "block";
                document.querySelectorAll("#addUser input, #addUser select").forEach(el => el.disabled = false);
            } 
            else if (queryType === "addVehicle") {
                document.getElementById("addVehicle").style.display = "block";
                document.querySelectorAll("#addVehicle input, #addVehicle select").forEach(el => el.disabled = false);
            }
        }
    </script>
</head>
<body>

    <div class="container">
        <div class="left">
            <h2>Vehicle Rental System - Query Selector</h2>

            <form method="POST">
                <label for="query_type">Choose a Query:</label>
                <select name="query_type" onchange="toggleForm()" id="query_type">
                    <option value="select">Select</option>
                    <option value="addUser">Add User</option>
                    <option value="addVehicle">Add Vehicle</option>
                    <option value="all_bookings">Get All Bookings with User and Vehicle Details</option>
                    <option value="most_rented_vehicle_type">Find the Most Frequently Rented Vehicle Type</option>
                    <option value="revenue_per_vehicle">Get Revenue Generated by Each Vehicle</option>
                    <option value="total_earnings_last_30_days">Get Total Earnings for the Last 30 Days</option>
                    <option value="user_booking_history">Get Booking History of a Specific User(Enter User Id )</option>
                    <option value="list_rented_vehicles">List Vehicles Currently Rented Out</option>
                    <option value="due_for_return_today">Find Vehicles Due for Return Today</option>
                    <option value="vehicles_needing_maintenance">Find Vehicles That Need Maintenance</option>
                    <option value="recent_complaints">Get Users Who Have Complained Recently</option>
                    <option value="list_active_discounts">List Discounts Currently Active</option>
                    <option value="average_rating_of_vehicles">Get Average Rating of Each Vehicle</option>
                </select>
                <div id="addUser" style="display: none;">
                    <h2>Add User</h2>
                    <label for="firstName">First Name:</label>
                    <input type="text" name="firstName" id="firstName" required>
                    <br><br>
    
                    <label for="middleName">Middle Name:</label>
                    <input type="text" name="middleName" id="middleName" required>
                    <br><br>
    
                    <label for="email">Email:</label>
                    <input type="email" name="email" id="email" required>
                    <br><br>
    
                    <label for="street">Street:</label>
                    <input type="text" name="street" id="street">
                    <br><br>
    
                    <label for="city">City:</label>
                    <input type="text" name="city" id="city">
                    <br><br>
    
                    <label for="postalCode">Postal Code:</label>
                    <input type="number" name="postalCode" id="postalCode" required>
                    <br><br>
    
                    <label for="IDType">ID Type:</label>
                    <select id="IDType" name="IDType" required>
                        <option value="Aadhar">Aadhar</option>
                        <option value="PAN">PAN</option>
                        <option value="Driving License">Driving License</option>
                        <option value="Passport">Passport</option>
                    </select><br><br>
    
                    <label for="IDNumber">ID Number:</label>
                    <input type="text" name="IDNumber" id="IDNumber" required>
                    <br><br>
    
                    <label for="mobileNumber1">Mobile Number 1:</label>
                    <input type="text" name="mobileNumber1" id="mobileNumber1" placeholder="10-digit number" required maxlength="10" minlength="10">
                    <br><br>
    
                    <label for="mobileNumber2">Mobile Number 2:</label>
                    <input type="text" name="mobileNumber2" id="mobileNumber2" placeholder="10-digit number" required maxlength="10" minlength="10">
                    <br><br>
                    
                </div>
                <div id="addVehicle" style="display: none;">
                    <h2>Add Vehicle</h2>
                
                    <label for="vehicleRegNO">Vehicle Registration Number:</label>
                    <input type="text" name="vehicleRegNO" id="vehicleRegNO" required maxlength="10">
                    <br><br>
                
                    <label for="vehicleType">Vehicle Type:</label>
                    <select id="vehicleType" name="vehicleType" required>
                        <option value="Car">Car</option>
                        <option value="Bike">Bike</option>
                        <option value="Truck">Truck</option>
                        <option value="Bus">Bus</option>
                    </select>
                    <br><br>
                
                    <label for="vehicleStatus">Vehicle Status:</label>
                    <select id="vehicleStatus" name="vehicleStatus">
                        <option value="1">Avaliable</option>
                        <option value="0">Not Avaliable</option>
                    </select>
                    <br><br>
                </div>

                <br><br>
                <label for="user_input">Input (if required, e.g., Vehicle Reg No.):</label>
                <input type="text" id="user_input" name="user_input" placeholder="Optional">

                <br><br>
                <button type="submit">Submit</button>
            </form>
            

            


            {% if executed_query %}
                <h3>Executed SQL Query:</h3>
                <pre>{{ executed_query }}</pre>
            {% endif %}

            {% if query_results %}
                <h3>Results for: {{ query_name }}</h3>
                <table border="1">
                    <tr>
                        {% for col in query_results[0] %}
                            <th>Column {{ loop.index }}</th>
                        {% endfor %}
                    </tr>
                    {% for row in query_results %}
                        <tr>
                            {% for data in row %}
                                <td>{{ data }}</td>
                            {% endfor %}
                        </tr>
                    {% endfor %}
                </table>
            {% endif %}

            <hr>

            <h2>Custom SQL Query Executor</h2>
            <form method="POST">
                <label for="custom_query">Enter Your SQL Query:</label><br>
                <textarea id="custom_query" name="custom_query" rows="4" cols="50" required></textarea>
                <br><br>
                <button type="submit">Execute Custom Query</button>
            </form>

            {% if custom_query %}
                <h3>Executed Custom SQL Query:</h3>
                <pre>{{ custom_query }}</pre>
            {% endif %}

            {% if error_message %}
                <h3 style="color: red;">{{ error_message }}</h3>
            {% endif %}

            {% if custom_results %}
                <h3>Custom Query Results:</h3>
                <table border="1">
                    <tr>
                        {% for col in custom_results[0] %}
                            <th>Column {{ loop.index }}</th>
                        {% endfor %}
                    </tr>
                    {% for row in custom_results %}
                        <tr>
                            {% for data in row %}
                                <td>{{ data }}</td>
                            {% endfor %}
                        </tr>
                    {% endfor %}
                </table>
            {% endif %}
        </div>
        <div class="right">
            <h1>Tables:</h1>
            <ul>
                <!-- Users Table -->
                <li>
                    <h3>Users Table</h3>
                    <div class="table-container">
                        <div class="table">
                            <div class="row header">
                                <div class="cell">User ID</div>
                                <div class="cell">First Name</div>
                                <div class="cell">Middle Name</div>
                                <div class="cell">Mobile Number</div>
                                <div class="cell">Email</div>
                                <div class="cell">Street</div>
                                <div class="cell">City</div>
                                <div class="cell">Postal Code</div>
                                <div class="cell">District</div>
                                <div class="cell">State</div>
                                <div class="cell">ID Type</div>
                                <div class="cell">ID Number</div>
                            </div>
                            {% for row in user %}
                            <div class="row">
                                {% for item in row %}
                                <div class="cell">{{ item }}</div>
                                {% endfor %}
                            </div>
                            {% endfor %}
                        </div>
                    </div>
                </li>
            
                <!-- Notification Table -->
                <li>
                    <h3>Notifications Table</h3>
                    <div class="table-container">
                        <div class="table">
                            <div class="row header">
                                <div class="cell">Notification ID</div>
                                <div class="cell">User ID</div>
                                <div class="cell">Message</div>
                            </div>
                            {% for row in notification %}
                            <div class="row">
                                {% for item in row %}
                                <div class="cell">{{ item }}</div>
                                {% endfor %}
                            </div>
                            {% endfor %}
                        </div>
                    </div>
                </li>
            
                <!-- User Notification Table -->
                <li>
                    <h3>User Notification Table</h3>
                    <div class="table-container">
                        <div class="table">
                            <div class="row header">
                                <div class="cell">User ID</div>
                                <div class="cell">Notification ID</div>
                            </div>
                            {% for row in usernotification %}
                            <div class="row">
                                {% for item in row %}
                                <div class="cell">{{ item }}</div>
                                {% endfor %}
                            </div>
                            {% endfor %}
                        </div>
                    </div>
                </li>
            
                <!-- Report Table -->
                <li>
                    <h3>Report Table</h3>
                    <div class="table-container">
                        <div class="table">
                            <div class="row header">
                                <div class="cell">Report ID</div>
                                <div class="cell">Report Type</div>
                                <div class="cell">User ID</div>
                                <div class="cell">Report Details</div>
                            </div>
                            {% for row in report %}
                            <div class="row">
                                {% for item in row %}
                                <div class="cell">{{ item }}</div>
                                {% endfor %}
                            </div>
                            {% endfor %}
                        </div>
                    </div>
                </li>
            
                <!-- Payment Table -->
                <li>
                    <h3>Payments Table</h3>
                    <div class="table-container">
                        <div class="table">
                            <div class="row header">
                                <div class="cell">Transaction ID</div>
                                <div class="cell">Payment Amount</div>
                                <div class="cell">Payment Date</div>
                                <div class="cell">Payment Mode</div>
                                <div class="cell">Refund Status</div>
                            </div>
                            {% for row in payment %}
                            <div class="row">
                                {% for item in row %}
                                <div class="cell">{{ item }}</div>
                                {% endfor %}
                            </div>
                            {% endfor %}
                        </div>
                    </div>
                </li>
            
                <!-- Booking Table -->
                <li>
                    <h3>Bookings Table</h3>
                    <div class="table-container">
                        <div class="table">
                            <div class="row header">
                                <div class="cell">Booking ID</div>
                                <div class="cell">Pickup Date</div>
                                <div class="cell">Return Date</div>
                                <div class="cell">Cancellation Status</div>
                                <div class="cell">Transaction ID</div>
                                <div class="cell">User ID</div>
                            </div>
                            {% for row in bookings %}
                            <div class="row">
                                {% for item in row %}
                                <div class="cell">{{ item }}</div>
                                {% endfor %}
                            </div>
                            {% endfor %}
                        </div>
                    </div>
                </li>
            
                <!-- Rental History Table -->
                <li>
                    <h3>Rental History Table</h3>
                    <div class="table-container">
                        <div class="table">
                            <div class="row header">
                                <div class="cell">Booking ID</div>
                                <div class="cell">Damage</div>
                            </div>
                            {% for row in rentalHistory %}
                            <div class="row">
                                {% for item in row %}
                                <div class="cell">{{ item }}</div>
                                {% endfor %}
                            </div>
                            {% endfor %}
                        </div>
                    </div>
                </li>
            
                <!-- Discounts Table -->
                <li>
                    <h3>Discounts Table</h3>
                    <div class="table-container">
                        <div class="table">
                            <div class="row header">
                                <div class="cell">Discount ID</div>
                                <div class="cell">Title</div>
                                <div class="cell">Discount Percentage</div>
                                <div class="cell">Start Date</div>
                                <div class="cell">End Date</div>
                            </div>
                            {% for row in discounts %}
                            <div class="row">
                                {% for item in row %}
                                <div class="cell">{{ item }}</div>
                                {% endfor %}
                            </div>
                            {% endfor %}
                        </div>
                    </div>
                </li>
            
                <!-- Booking Discounts Table -->
                <li>
                    <h3>Booking Discounts Table</h3>
                    <div class="table-container">
                        <div class="table">
                            <div class="row header">
                                <div class="cell">Booking ID</div>
                                <div class="cell">Discount ID</div>
                            </div>
                            {% for row in bookingDiscounts %}
                            <div class="row">
                                {% for item in row %}
                                <div class="cell">{{ item }}</div>
                                {% endfor %}
                            </div>
                            {% endfor %}
                        </div>
                    </div>
                </li>
                <!-- Feedback   Table -->
                <li>
                    <h3>Feedback Table</h3>
                    <div class="table-container">
                        <div class="table">
                            <div class="row header">
                                <div class="cell">Booking ID</div>
                                <div class="cell">Rating</div>
                                <div class="cell">Comments</div>
                            </div>
                            {% for row in feedback %}
                            <div class="row">
                                {% for item in row %}
                                <div class="cell">{{ item }}</div>
                                {% endfor %}
                            </div>
                            {% endfor %}
                        </div>
                    </div>
                </li>

                <!-- Vehicle Table -->
                <li>
                    <h3>Vehicle Table</h3>
                    <div class="table-container">
                        <div class="table">
                            <div class="row header">
                                <div class="cell">Vehicle ID</div>
                                <div class="cell">Vehicle Reg No</div>
                                <div class="cell">Vehicle Type</div>
                                <div class="cell">Vehicle Status</div>
                            </div>
                            {% for row in vehicle %}
                            <div class="row">
                                {% for item in row %}
                                <div class="cell">{{ item }}</div>
                                {% endfor %}
                            </div>
                            {% endfor %}
                        </div>
                    </div>
                </li>

                <!-- Booking Details Table -->
                <li>
                    <h3>Booking Details Table</h3>
                    <div class="table-container">
                        <div class="table">
                            <div class="row header">
                                <div class="cell">Booking ID</div>
                                <div class="cell">Vehicle ID</div>
                            </div>
                            {% for row in bookingDetails %}
                            <div class="row">
                                {% for item in row %}
                                <div class="cell">{{ item }}</div>
                                {% endfor %}
                            </div>
                            {% endfor %}
                        </div>
                    </div>
                </li>

                <!-- Maintenance Table -->
                <li>
                    <h3>Maintenance Table</h3>
                    <div class="table-container">
                        <div class="table">
                            <div class="row header">
                                <div class="cell">Maintenance ID</div>
                                <div class="cell">Description</div>
                                <div class="cell">Maintenance Date</div>
                                <div class="cell">Cost</div>
                                <div class="cell">Repair Status</div>
                                <div class="cell">Vehicle ID</div>
                            </div>
                            {% for row in maintenance %}
                            <div class="row">
                                {% for item in row %}
                                <div class="cell">{{ item }}</div>
                                {% endfor %}
                            </div>
                            {% endfor %}
                        </div>
                    </div>
                </li>
            </ul>
            
        </div>
        
    </div>



</body>
</html>
